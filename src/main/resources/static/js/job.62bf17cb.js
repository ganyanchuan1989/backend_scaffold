"use strict";(self["webpackChunkhrms_frontend"]=self["webpackChunkhrms_frontend"]||[]).push([[569],{3465:function(e,a,t){var o=t(9200);class l{add(e){return(0,o.W)("/api/job/add",{method:"POST",data:e})}update(e){return(0,o.W)("/api/job/update",{method:"POST",data:e})}delete(e){return(0,o.W)("/api/job/delete",{method:"POST",data:e})}list(){return(0,o.W)("/api/job/list",{method:"POST"})}listAll(){return(0,o.W)("/api/job/listAll",{method:"POST"})}queryByCode(e){return(0,o.W)("/api/job/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,o.W)("/api/job/likeByCode",{method:"POST",data:e})}}a["Z"]=new l},9394:function(e,a,t){t.d(a,{u:function(){return o}});const o=(e,a)=>{for(let t in e)e[t]=a[t];return e}},6677:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var o=t(3396),l=t(4870),u=t(3465),n=t(2074),d=t(2483),r=t(8439),i=t(9394),s={__name:"JobAdd",setup(e){const a=(0,d.yj)(),t=(0,d.tv)();let s=r.zw.ADD,m=null,p=(0,l.qj)({jobCode:"",jobName:"",jobDesc:""});const b=(0,l.iH)(),c=async e=>{if(s===r.zw.UPDATE){e={...m,...e};const a=await u.Z.update(e);n.ZP.info("修改成功："+a.jobCode),t.back()}else{const a=await u.Z.add(e);n.ZP.info("新增成功："+a.jobCode),b.value.resetFields()}};return(0,o.bv)((async()=>{a.params.code&&(s=r.zw.UPDATE,m=await u.Z.queryByCode({jobCode:a.params.code}),(0,i.u)(p,{...m}))})),(e,a)=>{const t=(0,o.up)("a-input"),u=(0,o.up)("a-form-item"),n=(0,o.up)("a-textarea"),d=(0,o.up)("a-button"),i=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(i,(0,o.dG)({model:(0,l.SU)(p),ref_key:"formRef",ref:b,autocomplete:"off",onFinish:c},(0,l.SU)(r.Ju)),{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"职位代码",name:"jobCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(p).jobCode,"onUpdate:value":a[0]||(a[0]=e=>(0,l.SU)(p).jobCode=e)},null,8,["value"])])),_:1}),(0,o.Wm)(u,{label:"职位名称",name:"jobName",rules:[{required:!0,message:"请输入职位名称!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(p).jobName,"onUpdate:value":a[1]||(a[1]=e=>(0,l.SU)(p).jobName=e)},null,8,["value"])])),_:1}),(0,o.Wm)(u,{label:"职位简介",name:"jobDesc"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{value:(0,l.SU)(p).jobDesc,"onUpdate:value":a[2]||(a[2]=e=>(0,l.SU)(p).jobDesc=e)},null,8,["value"])])),_:1}),(0,o.Wm)(u,{"wrapper-col":{offset:8,span:16}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary","html-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1})])),_:1})])),_:1},16,["model"])])}}};const m=s;var p=m},850:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});t(7658);var o=t(3396),l=t(4870),u=t(3465),n=t(2483),d=t(2074),r=t(8439);const i=["onClick"],s=(0,o._)("a",null,"删除",-1);var m={__name:"JobList",setup(e){const a=(0,n.tv)(),t=[{title:"职位代码",dataIndex:"jobCode",key:"jobCode"},{title:"职位名称",dataIndex:"jobName",key:"jobName"},{title:"职位简称",dataIndex:"jobDesc",key:"jobDesc"},{title:"操作",dataIndex:"operation"}],m=(0,l.iH)([]),p=(0,l.iH)();let b=(0,l.qj)({jobCode:""});const c=async e=>{m.value=await u.Z.likeByCode(e)},f=async()=>{p.value.resetFields(),y()};(0,o.bv)((async()=>{y()}));const j=e=>{console.log(">>.job",e.jobCode),a.push({path:`/job/update/${e.jobCode}`})},y=async()=>{m.value=await u.Z.list()},w=async e=>{await u.Z["delete"]({...e,dataStatus:r.s_.DELETE}),d.ZP.info("删除成功："+e.jobCode),y()};return(e,a)=>{const u=(0,o.up)("a-input"),n=(0,o.up)("a-form-item"),d=(0,o.up)("a-button"),y=(0,o.up)("a-form"),v=(0,o.up)("a-popconfirm"),C=(0,o.up)("a-table");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(y,(0,o.dG)({model:(0,l.SU)(b),name:"basic",autocomplete:"off",onFinish:c},(0,l.SU)(r.Ju),{ref_key:"formRef",ref:p}),{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"职位代码",name:"jobCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:(0,l.SU)(b).jobCode,"onUpdate:value":a[0]||(a[0]=e=>(0,l.SU)(b).jobCode=e)},null,8,["value"])])),_:1}),(0,o.Wm)(n,{"wrapper-col":{offset:8,span:16}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"primary","html-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1}),(0,o.Wm)(d,{onClick:f,style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("重置")])),_:1})])),_:1})])),_:1},16,["model"]),(0,o.Wm)(C,{dataSource:m.value,columns:t},{bodyCell:(0,o.w5)((({column:e,record:a})=>["operation"===e.dataIndex?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("a",{onClick:e=>j(a)},"修改",8,i),(0,o.Uk)(" | "),m.value.length?((0,o.wg)(),(0,o.j4)(v,{key:0,title:"确定要删除吗?",onConfirm:e=>w(a)},{default:(0,o.w5)((()=>[s])),_:2},1032,["onConfirm"])):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])),_:1},8,["dataSource"])])}}};const p=m;var b=p}}]);
//# sourceMappingURL=job.62bf17cb.js.map