"use strict";(self["webpackChunkhrms_frontend"]=self["webpackChunkhrms_frontend"]||[]).push([[679],{8295:function(e,a,t){var o=t(9200);class l{add(e){return(0,o.W)("/api/contract/add",{method:"POST",data:e})}update(e){return(0,o.W)("/api/contract/update",{method:"POST",data:e})}delete(e){return(0,o.W)("/api/contract/delete",{method:"POST",data:e})}list(){return(0,o.W)("/api/contract/list",{method:"POST"})}listAll(){return(0,o.W)("/api/contract/listAll",{method:"POST"})}queryByCode(e){return(0,o.W)("/api/contract/queryByCode",{method:"POST",data:e})}queryByEmpCode(e){return(0,o.W)("/api/contract/queryByEmpCode",{method:"POST",data:e})}likeByCode(e){return(0,o.W)("/api/contract/likeByCode",{method:"POST",data:e})}}a["Z"]=new l},5593:function(e,a,t){var o=t(9200);class l{add(e){return(0,o.W)("/api/employee/add",{method:"POST",data:e})}update(e){return(0,o.W)("/api/employee/update",{method:"POST",data:e})}delete(e){return(0,o.W)("/api/employee/delete",{method:"POST",data:e})}list(){return(0,o.W)("/api/employee/list",{method:"POST"})}listAll(){return(0,o.W)("/api/employee/listAll",{method:"POST"})}queryByCode(e){return(0,o.W)("/api/employee/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,o.W)("/api/employee/likeByCode",{method:"POST",data:e})}login(e){return(0,o.W)("/api/employee/login",{method:"POST",data:e})}modifyPwd(e){return(0,o.W)("/api/employee/modifyPwd",{method:"POST",data:e})}}a["Z"]=new l},9394:function(e,a,t){t.d(a,{u:function(){return o}});const o=(e,a)=>{for(let t in e)e[t]=a[t];return e}},7026:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var o=t(3396),l=t(4870),d=t(7139),n=t(5593),r=t(8295),u=t(2074),i=t(2483),c=t(8439),m=t(9394),s=t(5508),p=t(8549);const f={class:"contract_container"};var y={__name:"ContractAdd",setup(e){const a=(0,i.yj)(),t=(0,i.tv)();let y=c.zw.ADD,S=null,v=(0,l.iH)(!1),w=(0,l.qj)({contractCode:void 0,contractStartDate:void 0,contractEndDate:void 0,contractSignDate:void 0,contractSalary:void 0,empCode:void 0,isProbation:0,probationSalaryRatio:80});const W=(0,l.qj)({value:[]}),b=(0,l.iH)(),C=async e=>{if(y===c.zw.UPDATE){e={...S,...e};const a=await r.Z.update(e);u.ZP.info("修改成功："+a.contractCode),v.value||t.back()}else{const a=await r.Z.add(e);u.ZP.info("新增成功："+a.contractCode),(0,m.u)(w,{...a})}},U=async()=>{W.value=await n.Z.list()};return(0,o.bv)((async()=>{U(),a.params.code?(y=c.zw.UPDATE,S=await r.Z.queryByCode({contractCode:a.params.code}),(0,m.u)(w,{...S})):"/contract/my"===a.fullPath&&(v.value=!0,y=c.zw.UPDATE,S=await r.Z.queryByEmpCode({empCode:(0,p.bG)().empCode}),(0,m.u)(w,{...S}))})),(e,a)=>{const t=(0,o.up)("a-input"),n=(0,o.up)("a-form-item"),r=(0,o.up)("a-col"),u=(0,o.up)("a-select-option"),i=(0,o.up)("a-select"),c=(0,o.up)("a-date-picker"),m=(0,o.up)("a-row"),p=(0,o.up)("a-button"),y=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(y,{model:(0,l.SU)(w),ref_key:"formRef",ref:b,autocomplete:"off",onFinish:C},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{span:24},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"合同代码",name:"contractCode"},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(w).contractCode,"onUpdate:value":a[0]||(a[0]=e=>(0,l.SU)(w).contractCode=e),disabled:""},null,8,["value"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"员工姓名",name:"empCode",rules:[{required:!0,message:"合同签订时间!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{value:(0,l.SU)(w).empCode,"onUpdate:value":a[1]||(a[1]=e=>(0,l.SU)(w).empCode=e),disabled:(0,l.SU)(v)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(W.value,((e,a)=>((0,o.wg)(),(0,o.j4)(u,{key:a,value:e.empCode},{default:(0,o.w5)((()=>[(0,o.Uk)((0,d.zw)(e.empName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"合同开始时间",name:"contractStartDate",rules:[{required:!0,message:"请选择合同开始时间!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:(0,l.SU)(w).contractStartDate,"onUpdate:value":a[2]||(a[2]=e=>(0,l.SU)(w).contractStartDate=e),"value-format":"YYYY-MM-DD",disabled:(0,l.SU)(v)},null,8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"合同结束时间",name:"contractEndDate",rules:[{required:!0,message:"合同结束时间!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:(0,l.SU)(w).contractEndDate,"onUpdate:value":a[3]||(a[3]=e=>(0,l.SU)(w).contractEndDate=e),"value-format":"YYYY-MM-DD",disabled:(0,l.SU)(v)},null,8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"合同签订时间",name:"contractSignDate",rules:[{required:!0,message:"合同签订时间!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:(0,l.SU)(w).contractSignDate,"onUpdate:value":a[4]||(a[4]=e=>(0,l.SU)(w).contractSignDate=e),"value-format":"YYYY-MM-DD",disabled:(0,l.SU)(v)},null,8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"薪资",name:"contractSalary",rules:[{required:!0,message:"请输入试用期薪资比例!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(w).contractSalary,"onUpdate:value":a[5]||(a[5]=e=>(0,l.SU)(w).contractSalary=e),disabled:(0,l.SU)(v)},null,8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"是否需要试用期",name:"isProbation"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{value:(0,l.SU)(w).isProbation,"onUpdate:value":a[6]||(a[6]=e=>(0,l.SU)(w).isProbation=e),disabled:(0,l.SU)(v)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(s.hi)("hrms_contract_is_probation"),((e,a)=>((0,o.wg)(),(0,o.j4)(u,{key:a,value:e.dataDictValue,disabled:(0,l.SU)(v)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,d.zw)(e.dataDictLabel),1)])),_:2},1032,["value","disabled"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1}),(0,o.Wm)(r,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"试用期薪资比例",name:"probationSalaryRatio",rules:[{required:!0,message:"请输入试用期薪资比例!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(w).probationSalaryRatio,"onUpdate:value":a[7]||(a[7]=e=>(0,l.SU)(w).probationSalaryRatio=e),disabled:(0,l.SU)(v)},null,8,["value","disabled"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(n,{"wrapper-col":{offset:8,span:16}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"primary","html-type":"submit",disabled:(0,l.SU)(v)},{default:(0,o.w5)((()=>[(0,o.Uk)("保存")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])])}}};const S=y;var v=S},7845:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});t(7658);var o=t(3396),l=t(4870),d=t(7139),n=t(8295),r=t(5593),u=t(2483),i=t(2074),c=t(8439);const m=["onClick"],s=(0,o._)("a",null,"删除",-1);var p={__name:"ContractList",setup(e){const a=(0,u.tv)(),t=(0,l.qj)({value:[]}),p=[{title:"合同代码",dataIndex:"contractCode",key:"contractCode"},{title:"员工",dataIndex:"empCode",key:"empCode"},{title:"开始时间",dataIndex:"contractStartDate",key:"contractStartDate"},{title:"结束时间",dataIndex:"contractEndDate",key:"contractEndDate"},{title:"合同工资",dataIndex:"contractSalary",key:"contractSalary"},{title:"操作",dataIndex:"operation"}],f=(0,l.iH)([]),y=(0,l.iH)();let S=(0,l.qj)({contractCode:""});const v=async e=>{f.value=await n.Z.likeByCode(e)},w=async()=>{y.value.resetFields(),b()};(0,o.bv)((async()=>{b(),C()}));const W=e=>{a.push({path:`/contract/update/${e.contractCode}`})},b=async()=>{f.value=await n.Z.list()},C=async()=>{t.value=await r.Z.list()},U=async e=>{await n.Z["delete"]({...e,dataStatus:c.s_.DELETE}),i.ZP.info("删除成功："+e.contractCode),b()},_=e=>{for(const a of t.value)if(a.empCode===e.empCode)return a.empName;return e.empCode};return(e,a)=>{const t=(0,o.up)("a-input"),n=(0,o.up)("a-form-item"),r=(0,o.up)("a-button"),u=(0,o.up)("a-form"),i=(0,o.up)("a-popconfirm"),b=(0,o.up)("a-table");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(u,(0,o.dG)({model:(0,l.SU)(S),name:"basic",autocomplete:"off",onFinish:v},(0,l.SU)(c.Ju),{ref_key:"formRef",ref:y}),{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"合同代码",name:"contractCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{value:(0,l.SU)(S).contractCode,"onUpdate:value":a[0]||(a[0]=e=>(0,l.SU)(S).contractCode=e)},null,8,["value"])])),_:1}),(0,o.Wm)(n,{"wrapper-col":{offset:8,span:16}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"primary","html-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)("查询")])),_:1}),(0,o.Wm)(r,{onClick:w,style:{"margin-left":"10px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("重置")])),_:1})])),_:1})])),_:1},16,["model"]),(0,o.Wm)(b,{dataSource:f.value,columns:p},{bodyCell:(0,o.w5)((({column:e,record:a})=>["operation"===e.dataIndex?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("a",{onClick:e=>W(a)},"修改",8,m),(0,o.Uk)(" | "),f.value.length?((0,o.wg)(),(0,o.j4)(i,{key:0,title:"确定要删除吗?",onConfirm:e=>U(a)},{default:(0,o.w5)((()=>[s])),_:2},1032,["onConfirm"])):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0),"empCode"===e.dataIndex?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,d.zw)(_(a)),1)],64)):(0,o.kq)("",!0)])),_:1},8,["dataSource"])])}}};const f=p;var y=f}}]);
//# sourceMappingURL=contract.2ead0fdf.js.map