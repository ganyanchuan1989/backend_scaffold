{"version":3,"file":"js/job.62bf17cb.js","mappings":"uIAEA,MAAMA,EACJC,IAAIC,GACF,OAAOC,EAAAA,EAAAA,GAAQ,eAAgB,CAC7BC,OAAQ,OACRF,QAEJ,CACAG,OAAOH,GACL,OAAOC,EAAAA,EAAAA,GAAQ,kBAAmB,CAChCC,OAAQ,OACRF,QAEJ,CACAI,OAAOJ,GACL,OAAOC,EAAAA,EAAAA,GAAQ,kBAAmB,CAChCC,OAAQ,OACRF,QAEJ,CACAK,OACE,OAAOJ,EAAAA,EAAAA,GAAQ,gBAAiB,CAC9BC,OAAQ,QAEZ,CACAI,UACE,OAAOL,EAAAA,EAAAA,GAAQ,mBAAoB,CACjCC,OAAQ,QAEZ,CACAK,YAAYP,GACV,OAAOC,EAAAA,EAAAA,GAAQ,uBAAwB,CACrCC,OAAQ,OACRF,QAEJ,CACAQ,WAAWR,GACT,OAAOC,EAAAA,EAAAA,GAAQ,sBAAuB,CACpCC,OAAQ,OACRF,QAEJ,EAGF,WAAmBF,C,uDC7CZ,MAAMW,EAAiBA,CAACC,EAAWV,KACxC,IAAK,IAAIW,KAAOD,EACdA,EAAUC,GAAOX,EAAKW,GAExB,OAAOD,CAAS,C,0KC0ClB,MAAME,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAEf,IAAIC,EAAUC,EAAAA,GAAAA,IACVC,EAAQ,KAGRR,GAAYS,EAAAA,EAAAA,IAAS,CACvBC,QAAS,GACTC,QAAS,GACTC,QAAS,KAGX,MAAMC,GAAUC,EAAAA,EAAAA,MAEVC,EAAWC,UACf,GAAIV,IAAYC,EAAAA,GAAAA,OAAgB,CAC9BU,EAAS,IAAKT,KAAUS,GACxB,MAAMC,QAAYC,EAAAA,EAAAA,OAAkBF,GACpCG,EAAAA,GAAAA,KAAa,QAAUF,EAAIR,SAC3BN,EAAOiB,MACT,KAAO,CACL,MAAMH,QAAYC,EAAAA,EAAAA,IAAeF,GACjCG,EAAAA,GAAAA,KAAa,QAAUF,EAAIR,SAC3BG,EAAQS,MAAMC,aAChB,G,OAGFC,EAAAA,EAAAA,KAAUR,UACJd,EAAMuB,OAAOC,OACfpB,EAAUC,EAAAA,GAAAA,OACVC,QAAcW,EAAAA,EAAAA,YAAuB,CAAET,QAASR,EAAMuB,OAAOC,QAC7D3B,EAAAA,EAAAA,GAAeC,EAAW,IAAKQ,IACjC,I,0nCC5EF,MAAMmB,EAAc,EAEpB,O,4NCyCA,MAAMvB,GAASC,EAAAA,EAAAA,MAETuB,EAAU,CACd,CAAEC,MAAO,OAAQC,UAAW,UAAW7B,IAAK,WAC5C,CAAE4B,MAAO,OAAQC,UAAW,UAAW7B,IAAK,WAC5C,CAAE4B,MAAO,OAAQC,UAAW,UAAW7B,IAAK,WAC5C,CAAE4B,MAAO,KAAMC,UAAW,cAGtBC,GAAajB,EAAAA,EAAAA,IAAI,IACjBD,GAAUC,EAAAA,EAAAA,MAEhB,IAAId,GAAYS,EAAAA,EAAAA,IAAS,CACvBC,QAAS,KAGX,MAAMK,EAAWC,UACfe,EAAWT,YAAcH,EAAAA,EAAAA,WAAsBF,EAAO,EAGlDe,EAAYhB,UAChBH,EAAQS,MAAMC,cACdU,GAAU,GAGZT,EAAAA,EAAAA,KAAUR,UACRiB,GAAU,IAGZ,MAAMC,EAAaC,IACjBC,QAAQC,IAAI,SAAUF,EAAOzB,SAC7BN,EAAOkC,KAAK,CACVC,KAAO,eAAcJ,EAAOzB,WAC5B,EAGEuB,EAAWjB,UACfe,EAAWT,YAAcH,EAAAA,EAAAA,MAAiB,EAGtCqB,EAAiBxB,gBACfG,EAAAA,EAAAA,UAAkB,IAAKgB,EAAQM,WAAYC,EAAAA,GAAAA,SACjDtB,EAAAA,GAAAA,KAAa,QAAUe,EAAOzB,SAC9BuB,GAAU,E,gwCCtFZ,MAAMN,EAAc,EAEpB,O","sources":["webpack://hrms_frontend/./src/service/jobService.js","webpack://hrms_frontend/./src/utils/myUtils.js","webpack://hrms_frontend/./src/views/job/JobAdd.vue","webpack://hrms_frontend/./src/views/job/JobAdd.vue?cf53","webpack://hrms_frontend/./src/views/job/JobList.vue","webpack://hrms_frontend/./src/views/job/JobList.vue?2ac1"],"sourcesContent":["import { request } from \"./request/request\";\n\nclass JobService {\n  add(data) {\n    return request(\"/api/job/add\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  update(data) {\n    return request(\"/api/job/update\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  delete(data) {\n    return request(\"/api/job/delete\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  list() {\n    return request(\"/api/job/list\", {\n      method: \"POST\",\n    });\n  }\n  listAll() {\n    return request(\"/api/job/listAll\", {\n      method: \"POST\",\n    });\n  }\n  queryByCode(data) {\n    return request(\"/api/job/queryByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  likeByCode(data) {\n    return request(\"/api/job/likeByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n}\n\nexport default new JobService();\n","export const setFieldsValue = (formState, data) => {\r\n  for (let key in formState) {\r\n    formState[key] = data[key];\r\n  }\r\n  return formState;\r\n};\r\n\r\n","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      ref=\"formRef\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n    >\r\n      <a-form-item\r\n        label=\"职位代码\"\r\n        name=\"jobCode\"\r\n        :rules=\"[{ required: true, message: '请输入员工代码!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.jobCode\" />\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"职位名称\"\r\n        name=\"jobName\"\r\n        :rules=\"[{ required: true, message: '请输入职位名称!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.jobName\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item\r\n        label=\"职位简介\"\r\n        name=\"jobDesc\"\r\n      >\r\n        <a-textarea v-model:value=\"formState.jobDesc\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">保存</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport jobService from \"@/service/jobService\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { OPERATE, formOneLayout } from \"@/utils/constant\";\r\nimport { setFieldsValue } from \"@/utils/myUtils\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nlet operate = OPERATE.ADD;\r\nlet cache = null;\r\n\r\n\r\nlet formState = reactive({\r\n  jobCode: \"\",\r\n  jobName: \"\",\r\n  jobDesc: \"\",\r\n});\r\n\r\nconst formRef = ref();\r\n\r\nconst onFinish = async (values) => {\r\n  if (operate === OPERATE.UPDATE) {\r\n    values = { ...cache, ...values };\r\n    const ret = await jobService.update(values);\r\n    message.info(\"修改成功：\" + ret.jobCode);\r\n    router.back();\r\n  } else {\r\n    const ret = await jobService.add(values);\r\n    message.info(\"新增成功：\" + ret.jobCode);\r\n    formRef.value.resetFields();\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  if (route.params.code) {\r\n    operate = OPERATE.UPDATE; // 修改\r\n    cache = await jobService.queryByCode({ jobCode: route.params.code });\r\n    setFieldsValue(formState, { ...cache });\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./JobAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JobAdd.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      name=\"basic\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n      ref=\"formRef\"\r\n    >\r\n      <a-form-item\r\n        label=\"职位代码\"\r\n        name=\"jobCode\"\r\n        :rules=\"[{ required: true, message: '请输入员工代码!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.jobCode\" />\r\n      </a-form-item>\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">查询</a-button>\r\n        <a-button @click=\"resetForm\" style=\"margin-left: 10px\">重置</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\">\r\n      <template #bodyCell=\"{ column, record }\">\r\n        <template v-if=\"column.dataIndex === 'operation'\">\r\n          <a @click=\"updateJob(record)\">修改</a> |\r\n          <a-popconfirm\r\n            v-if=\"dataSource.length\"\r\n            title=\"确定要删除吗?\"\r\n            @confirm=\"deleteDataDict(record)\"\r\n          >\r\n            <a>删除</a>\r\n          </a-popconfirm>\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive, ref } from \"vue\";\r\nimport jobService from \"@/service/jobService\"; //引入路由函数\r\nimport { useRouter } from \"vue-router\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { DATA_STATUS, formOneLayout } from \"@/utils/constant\";\r\n\r\nconst router = useRouter();\r\n\r\nconst columns = [\r\n  { title: \"职位代码\", dataIndex: \"jobCode\", key: \"jobCode\" },\r\n  { title: \"职位名称\", dataIndex: \"jobName\", key: \"jobName\" },\r\n  { title: \"职位简称\", dataIndex: \"jobDesc\", key: \"jobDesc\" },\r\n  { title: \"操作\", dataIndex: \"operation\" },\r\n];\r\n\r\nconst dataSource = ref([]);\r\nconst formRef = ref();\r\n\r\nlet formState = reactive({\r\n  jobCode: \"\",\r\n});\r\n\r\nconst onFinish = async (values) => {\r\n  dataSource.value = await jobService.likeByCode(values);\r\n};\r\n\r\nconst resetForm = async () => {\r\n  formRef.value.resetFields();\r\n  queryAll();\r\n};\r\n\r\nonMounted(async () => {\r\n  queryAll();\r\n});\r\n\r\nconst updateJob = (record) => {\r\n  console.log('>>.job', record.jobCode)\r\n  router.push({\r\n    path: `/job/update/${record.jobCode}`,\r\n  });\r\n};\r\n\r\nconst queryAll = async () => {\r\n  dataSource.value = await jobService.list();\r\n};\r\n\r\nconst deleteDataDict = async (record) => {\r\n  await jobService.delete({ ...record, dataStatus: DATA_STATUS.DELETE });\r\n  message.info(\"删除成功：\" + record.jobCode);\r\n  queryAll();\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./JobList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JobList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["JobService","add","data","request","method","update","delete","list","listAll","queryByCode","likeByCode","setFieldsValue","formState","key","route","useRoute","router","useRouter","operate","OPERATE","cache","reactive","jobCode","jobName","jobDesc","formRef","ref","onFinish","async","values","ret","jobService","message","back","value","resetFields","onMounted","params","code","__exports__","columns","title","dataIndex","dataSource","resetForm","queryAll","updateJob","record","console","log","push","path","deleteDataDict","dataStatus","DATA_STATUS"],"sourceRoot":""}