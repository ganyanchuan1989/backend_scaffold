{"version":3,"file":"js/contract.2ead0fdf.js","mappings":"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","sources":["webpack://hrms_frontend/./src/service/contractService.js","webpack://hrms_frontend/./src/service/employeeService.js","webpack://hrms_frontend/./src/utils/myUtils.js","webpack://hrms_frontend/./src/views/contract/ContractAdd.vue","webpack://hrms_frontend/./src/views/contract/ContractAdd.vue?4238","webpack://hrms_frontend/./src/views/contract/ContractList.vue","webpack://hrms_frontend/./src/views/contract/ContractList.vue?09a2"],"sourcesContent":["import { request } from \"./request/request\";\n\nclass ContractService {\n  add(data) {\n    return request(\"/api/contract/add\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  update(data) {\n    return request(\"/api/contract/update\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  delete(data) {\n    return request(\"/api/contract/delete\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  list() {\n    return request(\"/api/contract/list\", {\n      method: \"POST\",\n    });\n  }\n  listAll() {\n    return request(\"/api/contract/listAll\", {\n      method: \"POST\",\n    });\n  }\n  queryByCode(data) {\n    return request(\"/api/contract/queryByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  queryByEmpCode(data) {\n    return request(\"/api/contract/queryByEmpCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  likeByCode(data) {\n    return request(\"/api/contract/likeByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n}\n\nexport default new ContractService();\n","import { request } from \"./request/request\";\n\nclass EmployeeService {\n  add(data) {\n    return request(\"/api/employee/add\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  update(data) {\n    return request(\"/api/employee/update\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  delete(data) {\n    return request(\"/api/employee/delete\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  list() {\n    return request(\"/api/employee/list\", {\n      method: \"POST\",\n    });\n  }\n  listAll() {\n    return request(\"/api/employee/listAll\", {\n      method: \"POST\",\n    });\n  }\n  queryByCode(data) {\n    return request(\"/api/employee/queryByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  likeByCode(data) {\n    return request(\"/api/employee/likeByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n\n  login(data) {\n    return request(\"/api/employee/login\", {\n      method: \"POST\",\n      data,\n    });\n  }\n\n  modifyPwd(data) {\n    return request(\"/api/employee/modifyPwd\", {\n      method: \"POST\",\n      data,\n    });\n  }\n\n  \n}\n\nexport default new EmployeeService();\n","export const setFieldsValue = (formState, data) => {\r\n  for (let key in formState) {\r\n    formState[key] = data[key];\r\n  }\r\n  return formState;\r\n};\r\n\r\n","<template>\r\n  <div class=\"contract_container\">\r\n    <a-form\r\n      :model=\"formState\"\r\n      ref=\"formRef\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n    >\r\n      <a-row>\r\n        <a-col :span=\"24\">\r\n          <a-form-item label=\"合同代码\" name=\"contractCode\">\r\n            <a-input v-model:value=\"formState.contractCode\" disabled />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"员工姓名\"\r\n            name=\"empCode\"\r\n            :rules=\"[{ required: true, message: '合同签订时间!' }]\"\r\n          >\r\n            <a-select v-model:value=\"formState.empCode\" :disabled=\"disabled\">\r\n              <template v-for=\"(item, index) in empState.value\" :key=\"index\">\r\n                <a-select-option :value=\"item.empCode\">{{\r\n                  item.empName\r\n                }}</a-select-option>\r\n              </template>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"合同开始时间\"\r\n            name=\"contractStartDate\"\r\n            :rules=\"[{ required: true, message: '请选择合同开始时间!' }]\"\r\n          >\r\n            <a-date-picker\r\n              v-model:value=\"formState.contractStartDate\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled=\"disabled\"\r\n            />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"合同结束时间\"\r\n            name=\"contractEndDate\"\r\n            :rules=\"[{ required: true, message: '合同结束时间!' }]\"\r\n          >\r\n            <a-date-picker\r\n              v-model:value=\"formState.contractEndDate\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled=\"disabled\"\r\n            />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"合同签订时间\"\r\n            name=\"contractSignDate\"\r\n            :rules=\"[{ required: true, message: '合同签订时间!' }]\"\r\n          >\r\n            <a-date-picker\r\n              v-model:value=\"formState.contractSignDate\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled=\"disabled\"\r\n            />\r\n          </a-form-item>\r\n        </a-col>\r\n\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"薪资\"\r\n            name=\"contractSalary\"\r\n            :rules=\"[{ required: true, message: '请输入试用期薪资比例!' }]\"\r\n          >\r\n            <a-input\r\n              v-model:value=\"formState.contractSalary\"\r\n              :disabled=\"disabled\"\r\n            />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item label=\"是否需要试用期\" name=\"isProbation\">\r\n            <a-select\r\n              v-model:value=\"formState.isProbation\"\r\n              :disabled=\"disabled\"\r\n            >\r\n              <template\r\n                v-for=\"(item, index) in getDictDataByKey(\r\n                  'hrms_contract_is_probation'\r\n                )\"\r\n                :key=\"index\"\r\n              >\r\n                <a-select-option\r\n                  :value=\"item.dataDictValue\"\r\n                  :disabled=\"disabled\"\r\n                  >{{ item.dataDictLabel }}</a-select-option\r\n                >\r\n              </template>\r\n            </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-item\r\n            label=\"试用期薪资比例\"\r\n            name=\"probationSalaryRatio\"\r\n            :rules=\"[{ required: true, message: '请输入试用期薪资比例!' }]\"\r\n          >\r\n            <a-input\r\n              v-model:value=\"formState.probationSalaryRatio\"\r\n              :disabled=\"disabled\"\r\n            />\r\n          </a-form-item>\r\n        </a-col>\r\n      </a-row>\r\n\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\" :disabled=\"disabled\"\r\n          >保存</a-button\r\n        >\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport employeeService from \"@/service/employeeService\";\r\n\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport contractService from \"@/service/contractService\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { OPERATE } from \"@/utils/constant\";\r\nimport { setFieldsValue } from \"@/utils/myUtils\";\r\nimport { getDictDataByKey } from \"@/utils/dataDictUtil\";\r\nimport { getUserInfo } from \"@/utils/authUtil\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nlet operate = OPERATE.ADD;\r\nlet cache = null;\r\nlet disabled = ref(false);\r\n\r\nlet formState = reactive({\r\n  contractCode: undefined,\r\n  contractStartDate: undefined,\r\n  contractEndDate: undefined,\r\n  contractSignDate: undefined,\r\n  contractSalary: undefined,\r\n  empCode: undefined,\r\n  isProbation: 0,\r\n  probationSalaryRatio: 80,\r\n});\r\n\r\nconst empState = reactive({\r\n  value: [],\r\n});\r\n\r\nconst formRef = ref();\r\n\r\nconst onFinish = async (values) => {\r\n  if (operate === OPERATE.UPDATE) {\r\n    values = { ...cache, ...values };\r\n    const ret = await contractService.update(values);\r\n    message.info(\"修改成功：\" + ret.contractCode);\r\n    if (!disabled.value) {\r\n      router.back();\r\n    }\r\n  } else {\r\n    const ret = await contractService.add(values);\r\n    message.info(\"新增成功：\" + ret.contractCode);\r\n    setFieldsValue(formState, { ...ret });\r\n  }\r\n};\r\n\r\nconst queryAllEmployee = async () => {\r\n  empState.value = await employeeService.list();\r\n};\r\n\r\nonMounted(async () => {\r\n  queryAllEmployee();\r\n  if (route.params.code) {\r\n    operate = OPERATE.UPDATE; // 修改\r\n    cache = await contractService.queryByCode({\r\n      contractCode: route.params.code,\r\n    });\r\n    setFieldsValue(formState, { ...cache });\r\n  } else if (route.fullPath === \"/contract/my\") {\r\n    disabled.value = true;\r\n    operate = OPERATE.UPDATE; // 修改\r\n    cache = await contractService.queryByEmpCode({\r\n      empCode: getUserInfo().empCode,\r\n    });\r\n\r\n    setFieldsValue(formState, { ...cache });\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.contract_container {\r\n  & .ant-col .ant-form-item-label {\r\n    width: 150px !important;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./ContractAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ContractAdd.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ContractAdd.vue?vue&type=style&index=0&id=fbea41ec&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      name=\"basic\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n      ref=\"formRef\"\r\n    >\r\n      <a-form-item\r\n        label=\"合同代码\"\r\n        name=\"contractCode\"\r\n        :rules=\"[{ required: true, message: '请输入员工代码!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.contractCode\" />\r\n      </a-form-item>\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">查询</a-button>\r\n        <a-button @click=\"resetForm\" style=\"margin-left: 10px\">重置</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\">\r\n      <template #bodyCell=\"{ column, record }\">\r\n        <template v-if=\"column.dataIndex === 'operation'\">\r\n          <a @click=\"updateContract(record)\">修改</a> |\r\n          <a-popconfirm\r\n            v-if=\"dataSource.length\"\r\n            title=\"确定要删除吗?\"\r\n            @confirm=\"deleteDataDict(record)\"\r\n          >\r\n            <a>删除</a>\r\n          </a-popconfirm>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'empCode'\"> \r\n          {{ getEmpNameByCode(record) }}\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive, ref } from \"vue\";\r\nimport contractService from \"@/service/contractService\"; //引入路由函数\r\nimport employeeService from \"@/service/employeeService\"; //引入路由函数\r\nimport { useRouter } from \"vue-router\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { DATA_STATUS, formOneLayout } from \"@/utils/constant\";\r\n\r\nconst router = useRouter();\r\n\r\nconst empState = reactive({\r\n  value: [],\r\n});\r\n\r\nconst columns = [\r\n  { title: \"合同代码\", dataIndex: \"contractCode\", key: \"contractCode\" },\r\n  { title: \"员工\", dataIndex: \"empCode\", key: \"empCode\" },\r\n  { title: \"开始时间\", dataIndex: \"contractStartDate\", key: \"contractStartDate\" },\r\n  { title: \"结束时间\", dataIndex: \"contractEndDate\", key: \"contractEndDate\" },\r\n  { title: \"合同工资\", dataIndex: \"contractSalary\", key: \"contractSalary\" },\r\n  { title: \"操作\", dataIndex: \"operation\" },\r\n];\r\n\r\nconst dataSource = ref([]);\r\nconst formRef = ref();\r\n\r\nlet formState = reactive({\r\n  contractCode: \"\",\r\n});\r\n\r\nconst onFinish = async (values) => {\r\n  dataSource.value = await contractService.likeByCode(values);\r\n};\r\n\r\nconst resetForm = async () => {\r\n  formRef.value.resetFields();\r\n  queryAll();\r\n};\r\n\r\nonMounted(async () => {\r\n  queryAll();\r\n  queryAllEmps();\r\n});\r\n\r\nconst updateContract = (record) => {\r\n  router.push({\r\n    path: `/contract/update/${record.contractCode}`,\r\n  });\r\n};\r\n\r\nconst queryAll = async () => {\r\n  dataSource.value = await contractService.list();\r\n};\r\n\r\nconst queryAllEmps = async () => {\r\n  empState.value = await employeeService.list();\r\n};\r\n\r\nconst deleteDataDict = async (record) => {\r\n  await contractService.delete({ ...record, dataStatus: DATA_STATUS.DELETE });\r\n  message.info(\"删除成功：\" + record.contractCode);\r\n  queryAll();\r\n};\r\n\r\nconst getEmpNameByCode = (record) => {\r\n  for (const item of empState.value) {\r\n    if (item.empCode === record.empCode) {\r\n      return item.empName;\r\n    }\r\n  }\r\n  return record.empCode;\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./ContractList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ContractList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["ContractService","add","data","request","method","update","delete","list","listAll","queryByCode","queryByEmpCode","likeByCode","EmployeeService","login","modifyPwd","setFieldsValue","formState","key","route","useRoute","router","useRouter","operate","OPERATE","cache","disabled","ref","reactive","contractCode","undefined","contractStartDate","contractEndDate","contractSignDate","contractSalary","empCode","isProbation","probationSalaryRatio","empState","value","formRef","onFinish","async","values","ret","contractService","message","back","queryAllEmployee","employeeService","onMounted","params","code","fullPath","getUserInfo","__exports__","columns","title","dataIndex","dataSource","resetForm","resetFields","queryAll","queryAllEmps","updateContract","record","push","path","deleteDataDict","dataStatus","DATA_STATUS","getEmpNameByCode","item","empName"],"sourceRoot":""}