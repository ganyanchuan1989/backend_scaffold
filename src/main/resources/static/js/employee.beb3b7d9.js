"use strict";(self["webpackChunkhrms_frontend"]=self["webpackChunkhrms_frontend"]||[]).push([[980],{5799:function(e,a,l){var t=l(9200);class d{add(e){return(0,t.W)("/api/dept/add",{method:"POST",data:e})}update(e){return(0,t.W)("/api/dept/update",{method:"POST",data:e})}delete(e){return(0,t.W)("/api/dept/delete",{method:"POST",data:e})}list(){return(0,t.W)("/api/dept/list",{method:"POST"})}listAll(){return(0,t.W)("/api/dept/listAll",{method:"POST"})}queryByCode(e){return(0,t.W)("/api/dept/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,t.W)("/api/dept/likeByCode",{method:"POST",data:e})}}a["Z"]=new d},5593:function(e,a,l){var t=l(9200);class d{add(e){return(0,t.W)("/api/employee/add",{method:"POST",data:e})}update(e){return(0,t.W)("/api/employee/update",{method:"POST",data:e})}delete(e){return(0,t.W)("/api/employee/delete",{method:"POST",data:e})}list(){return(0,t.W)("/api/employee/list",{method:"POST"})}listAll(){return(0,t.W)("/api/employee/listAll",{method:"POST"})}queryByCode(e){return(0,t.W)("/api/employee/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,t.W)("/api/employee/likeByCode",{method:"POST",data:e})}login(e){return(0,t.W)("/api/employee/login",{method:"POST",data:e})}modifyPwd(e){return(0,t.W)("/api/employee/modifyPwd",{method:"POST",data:e})}}a["Z"]=new d},3465:function(e,a,l){var t=l(9200);class d{add(e){return(0,t.W)("/api/job/add",{method:"POST",data:e})}update(e){return(0,t.W)("/api/job/update",{method:"POST",data:e})}delete(e){return(0,t.W)("/api/job/delete",{method:"POST",data:e})}list(){return(0,t.W)("/api/job/list",{method:"POST"})}listAll(){return(0,t.W)("/api/job/listAll",{method:"POST"})}queryByCode(e){return(0,t.W)("/api/job/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,t.W)("/api/job/likeByCode",{method:"POST",data:e})}}a["Z"]=new d},9394:function(e,a,l){l.d(a,{u:function(){return t}});const t=(e,a)=>{for(let l in e)e[l]=a[l];return e}},5622:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});var t=l(3396),d=l(4870),u=l(7139),m=l(5593),o=l(3465),n=l(5799),r=l(2074),p=l(2483),i=l(8439),s=l(9394),v=l(5508),f=l(8549);const w={class:"employee_container"};var c={__name:"EmployeeAdd",setup(e){const a=(0,p.yj)(),l=(0,p.tv)();let c=i.zw.ADD,W=null,S=(0,d.qj)({empCode:void 0,empName:void 0,jobCode:void 0,deptCode:void 0,empSex:void 0,empBirth:void 0,empHireDate:void 0,empTelPhone:void 0,empNativePlace:void 0,empEmerName:void 0,empEmerRelationship:void 0,empEmerTelPhone:void 0,empAddress:void 0,empEducation:void 0,empSchoolTag:void 0,empSchoolMajor:void 0,empRemark:void 0,empStatus:0});const U=(0,d.qj)({value:[]}),y=(0,d.qj)({value:[]}),_=(0,d.iH)(!1),b=(0,d.iH)(),h=async e=>{if(c===i.zw.UPDATE){e={...W,...e};const a=await m.Z.update(e);r.ZP.info("修改成功："+a.empCode),_.value||l.back()}else{const a=await m.Z.add(e);r.ZP.info("新增成功："+a.empCode),b.value.resetFields()}},C=async()=>{U.value=await o.Z.list()},P=async()=>{y.value=await n.Z.list()};return(0,t.bv)((async()=>{C(),P(),a.params.code?(c=i.zw.UPDATE,W=await m.Z.queryByCode({empCode:a.params.code}),(0,s.u)(S,{...W})):"/employee/my"===a.fullPath&&(_.value=!0,c=i.zw.UPDATE,W=await m.Z.queryByCode({empCode:(0,f.bG)().empCode}),(0,s.u)(S,{...W}))})),(e,a)=>{const l=(0,t.up)("a-input"),m=(0,t.up)("a-form-item"),o=(0,t.up)("a-col"),n=(0,t.up)("a-select-option"),r=(0,t.up)("a-select"),p=(0,t.up)("a-date-picker"),i=(0,t.up)("a-textarea"),s=(0,t.up)("a-row"),f=(0,t.up)("a-button"),c=(0,t.up)("a-form");return(0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(c,{model:(0,d.SU)(S),ref_key:"formRef",ref:b,autocomplete:"off",onFinish:h},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"员工代码",name:"empCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empCode,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(S).empCode=e),disabled:_.value},null,8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"姓名",name:"empName",rules:[{required:!0,message:"请输入员工姓名!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empName,"onUpdate:value":a[1]||(a[1]=e=>(0,d.SU)(S).empName=e),disabled:_.value},null,8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"职位",name:"jobCode",rules:[{required:!0,message:"请选择职位!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).jobCode,"onUpdate:value":a[2]||(a[2]=e=>(0,d.SU)(S).jobCode=e),disabled:_.value},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(U.value,((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.jobCode},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.jobName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"部门",name:"deptCode",rules:[{required:!0,message:"请选择部门!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).deptCode,"onUpdate:value":a[3]||(a[3]=e=>(0,d.SU)(S).deptCode=e),disabled:_.value},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.value,((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.deptCode},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.deptName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"性别",name:"empSex",rules:[{required:!0,message:"请选择性别!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).empSex,"onUpdate:value":a[4]||(a[4]=e=>(0,d.SU)(S).empSex=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(v.hi)("hrms_employee_sex"),((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.dataDictValue},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.dataDictLabel),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"出生日期",name:"empBirth",rules:[{required:!0,message:"请输入员工姓名!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{value:(0,d.SU)(S).empBirth,"onUpdate:value":a[5]||(a[5]=e=>(0,d.SU)(S).empBirth=e),"value-format":"YYYY-MM-DD"},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"入职时间",name:"empHireDate",rules:[{required:!0,message:"请选择入职时间!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{disabled:_.value,value:(0,d.SU)(S).empHireDate,"onUpdate:value":a[6]||(a[6]=e=>(0,d.SU)(S).empHireDate=e),"value-format":"YYYY-MM-DD"},null,8,["disabled","value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"电话",name:"empTelPhone",rules:[{required:!0,message:"请输电话!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empTelPhone,"onUpdate:value":a[7]||(a[7]=e=>(0,d.SU)(S).empTelPhone=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"籍贯",name:"empNativePlace",rules:[{required:!0,message:"请输籍贯!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empNativePlace,"onUpdate:value":a[8]||(a[8]=e=>(0,d.SU)(S).empNativePlace=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"紧急联系人",name:"empEmerName",rules:[{required:!0,message:"请输入紧急联系人!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empEmerName,"onUpdate:value":a[9]||(a[9]=e=>(0,d.SU)(S).empEmerName=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"紧急联系人关系",name:"empEmerRelationship",rules:[{required:!0,message:"请选择紧急联系人关系!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).empEmerRelationship,"onUpdate:value":a[10]||(a[10]=e=>(0,d.SU)(S).empEmerRelationship=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(v.hi)("hrms_employee_emer_relationship"),((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.dataDictValue},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.dataDictLabel),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"紧急联系人电话",name:"empEmerTelPhone",rules:[{required:!0,message:"请输入紧急联系人电话!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empEmerTelPhone,"onUpdate:value":a[11]||(a[11]=e=>(0,d.SU)(S).empEmerTelPhone=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"学历",name:"empEducation",rules:[{required:!0,message:"请选择学历!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).empEducation,"onUpdate:value":a[12]||(a[12]=e=>(0,d.SU)(S).empEducation=e),disabled:_.value},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(v.hi)("hrms_employee_education"),((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.dataDictValue},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.dataDictLabel),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"毕业学校",name:"empSchoolTag",rules:[{required:!0,message:"请输入毕业学校!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empSchoolTag,"onUpdate:value":a[13]||(a[13]=e=>(0,d.SU)(S).empSchoolTag=e),disabled:_.value},null,8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"专业",name:"empSchoolMajor",rules:[{required:!0,message:"请输入学习专业!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{value:(0,d.SU)(S).empSchoolMajor,"onUpdate:value":a[14]||(a[14]=e=>(0,d.SU)(S).empSchoolMajor=e),disabled:_.value},null,8,["value","disabled"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:24},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"地址",name:"empAddress",rules:[{required:!0,message:"请输入地址!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{value:(0,d.SU)(S).empAddress,"onUpdate:value":a[15]||(a[15]=e=>(0,d.SU)(S).empAddress=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:24},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"备注",name:"empRemark"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{value:(0,d.SU)(S).empRemark,"onUpdate:value":a[16]||(a[16]=e=>(0,d.SU)(S).empRemark=e)},null,8,["value"])])),_:1})])),_:1}),(0,t.Wm)(o,{span:8},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"状态",name:"empStatus",rules:[{required:!0,message:"请选择状态!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:(0,d.SU)(S).empStatus,"onUpdate:value":a[17]||(a[17]=e=>(0,d.SU)(S).empStatus=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(v.hi)("hrms_employee_status"),((e,a)=>((0,t.wg)(),(0,t.j4)(n,{key:a,value:e.dataDictValue},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(e.dataDictLabel),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(m,{"wrapper-col":{offset:8,span:16}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{type:"primary","html-type":"submit"},{default:(0,t.w5)((()=>[(0,t.Uk)("保存")])),_:1})])),_:1})])),_:1},8,["model"])])}}};const W=c;var S=W},776:function(e,a,l){l.r(a),l.d(a,{default:function(){return c}});l(7658);var t=l(3396),d=l(4870),u=l(7139),m=l(3465),o=l(5799),n=l(5593),r=l(2483),p=l(2074),i=l(8439);const s=["onClick"],v=(0,t._)("a",null,"删除",-1);var f={__name:"EmployeeList",setup(e){const a=(0,r.tv)(),l=[{title:"员工代码",dataIndex:"empCode",key:"empCode"},{title:"员工名称",dataIndex:"empName",key:"empName"},{title:"员工部门",dataIndex:"deptCode",key:"deptCode"},{title:"员工职位",dataIndex:"jobCode",key:"jobCode"},{title:"操作",dataIndex:"operation"}],f=(0,d.iH)([]),w=(0,d.iH)();let c=(0,d.qj)({empCode:""});const W=(0,d.qj)({value:[]}),S=(0,d.qj)({value:[]}),U=async e=>{f.value=await n.Z.likeByCode(e)},y=async()=>{w.value.resetFields(),C()},_=async()=>{W.value=await m.Z.list()},b=async()=>{S.value=await o.Z.list()};(0,t.bv)((async()=>{C(),_(),b()}));const h=e=>{a.push({path:`/employee/update/${e.empCode}`})},C=async()=>{f.value=await n.Z.list()},P=async e=>{await n.Z["delete"]({...e,dataStatus:i.s_.DELETE}),p.ZP.info("删除成功："+e.empCode),C()},k=e=>{for(const a of S.value)if(a.deptCode===e.deptCode)return a.deptName;return e.deptCode},g=e=>{for(const a of W.value)if(a.jobCode===e.jobCode)return a.jobName;return e.jobCode};return(e,a)=>{const m=(0,t.up)("a-input"),o=(0,t.up)("a-form-item"),n=(0,t.up)("a-button"),r=(0,t.up)("a-form"),p=(0,t.up)("a-popconfirm"),W=(0,t.up)("a-table");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(r,(0,t.dG)({model:(0,d.SU)(c),name:"basic",autocomplete:"off",onFinish:U},(0,d.SU)(i.Ju),{ref_key:"formRef",ref:w}),{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"员工代码",name:"empCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{value:(0,d.SU)(c).empCode,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(c).empCode=e)},null,8,["value"])])),_:1}),(0,t.Wm)(o,{"wrapper-col":{offset:8,span:16}},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{type:"primary","html-type":"submit"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1}),(0,t.Wm)(n,{onClick:y,style:{"margin-left":"10px"}},{default:(0,t.w5)((()=>[(0,t.Uk)("重置")])),_:1})])),_:1})])),_:1},16,["model"]),(0,t.Wm)(W,{dataSource:f.value,columns:l},{bodyCell:(0,t.w5)((({column:e,record:a})=>["operation"===e.dataIndex?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("a",{onClick:e=>h(a)},"修改",8,s),(0,t.Uk)(" | "),f.value.length?((0,t.wg)(),(0,t.j4)(p,{key:0,title:"确定要删除吗?",onConfirm:e=>P(a)},{default:(0,t.w5)((()=>[v])),_:2},1032,["onConfirm"])):(0,t.kq)("",!0)],64)):(0,t.kq)("",!0),"deptCode"===e.dataIndex?((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,u.zw)(k(a)),1)],64)):(0,t.kq)("",!0),"jobCode"===e.dataIndex?((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[(0,t.Uk)((0,u.zw)(g(a)),1)],64)):(0,t.kq)("",!0)])),_:1},8,["dataSource"])])}}};const w=f;var c=w},9586:function(e,a,l){l.r(a),l.d(a,{default:function(){return i}});var t=l(3396),d=l(4870),u=l(5593),m=l(8439),o=l(2074),n=l(8549),r={__name:"EmployeeModify",setup(e){let a=(0,d.qj)({oldPwd:"",newPwd:"",confirmPwd:""});const l=async e=>{const{newPwd:a,confirmPwd:l}=e,{empCode:t}=(0,n.bG)();if(a===l)try{await u.Z.modifyPwd({...e,empCode:t}),o.ZP.info("密码修改成功")}catch(d){console.log(d)}else o.ZP.error("新密码和确认密码不一致")};return(e,u)=>{const o=(0,t.up)("a-input"),n=(0,t.up)("a-form-item"),r=(0,t.up)("a-button"),p=(0,t.up)("a-form");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,(0,t.dG)({model:(0,d.SU)(a),ref:"formRef",autocomplete:"off",onFinish:l},(0,d.SU)(m.Ju)),{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"原始密码",name:"oldPwd",rules:[{required:!0,message:"请输入原始密码!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{value:(0,d.SU)(a).oldPwd,"onUpdate:value":u[0]||(u[0]=e=>(0,d.SU)(a).oldPwd=e)},null,8,["value"])])),_:1}),(0,t.Wm)(n,{label:"新密码",name:"newPwd",rules:[{required:!0,message:"请输入新密码!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{value:(0,d.SU)(a).newPwd,"onUpdate:value":u[1]||(u[1]=e=>(0,d.SU)(a).newPwd=e)},null,8,["value"])])),_:1}),(0,t.Wm)(n,{label:"确认密码",name:"confirmPwd",rules:[{required:!0,message:"请输入新密码!"}]},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{value:(0,d.SU)(a).confirmPwd,"onUpdate:value":u[2]||(u[2]=e=>(0,d.SU)(a).confirmPwd=e)},null,8,["value"])])),_:1}),(0,t.Wm)(n,{"wrapper-col":{offset:8,span:16}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{type:"primary","html-type":"submit"},{default:(0,t.w5)((()=>[(0,t.Uk)("保存")])),_:1})])),_:1})])),_:1},16,["model"])])}}};const p=r;var i=p}}]);
//# sourceMappingURL=employee.beb3b7d9.js.map