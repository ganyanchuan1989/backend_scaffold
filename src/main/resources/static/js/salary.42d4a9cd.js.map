{"version":3,"file":"js/salary.42d4a9cd.js","mappings":"uIAEA,MAAMA,EACJC,oBAAoBC,GAClB,OAAOC,EAAAA,EAAAA,GAAQ,uCAAwC,CACrDC,OAAQ,OACRF,QAEJ,CAEAG,SAASH,GACP,OAAOC,EAAAA,EAAAA,GAAQ,4BAA6B,CAC1CC,OAAQ,OACRF,OACAI,SAAU,OACVC,YAAa,mCAEjB,CACAC,OACE,OAAOL,EAAAA,EAAAA,GAAQ,wBAAyB,CACtCC,OAAQ,QAEZ,CACAK,cAAcP,GACZ,OAAOC,EAAAA,EAAAA,GAAQ,iCAAkC,CAC/CC,OAAQ,OACRF,QAEJ,EAGF,WAAmBF,C,uUCQnB,MAAMU,GAAYC,EAAAA,EAAAA,IAAS,CACzBC,UAAW,KAEPC,GAAaC,EAAAA,EAAAA,IAAI,IAEjBC,EAAU,CACd,CAAEC,MAAO,MAAOC,UAAW,UAAWC,IAAK,WAC3C,CAAEF,MAAO,KAAMC,UAAW,kBAAmBC,IAAK,mBAClD,CAAEF,MAAO,KAAMC,UAAW,mBAAoBC,IAAK,oBACnD,CAAEF,MAAO,OAAQC,UAAW,iBAAkBC,IAAK,kBACnD,CAAEF,MAAO,OAAQC,UAAW,YAAaC,IAAK,aAC9C,CACEF,MAAO,OACPC,UAAW,oBACXC,IAAK,qBAEP,CAAEF,MAAO,KAAMC,UAAW,iBAAkBC,IAAK,kBACjD,CAAEF,MAAO,MAAOC,UAAW,gBAAiBC,IAAK,iBACjD,CAAEF,MAAO,KAAMC,UAAW,gBAAiBC,IAAK,iBAChD,CAAEF,MAAO,OAAQC,UAAW,aAAcC,IAAK,eAEjDC,QAAQC,IAAIC,EAAAA,GAEZ,MAAMC,EAAWC,UACf,MAAM,UAAEX,GAAcY,EAChBC,EAAkBb,EAAUc,OAC5BC,EAAmBf,EAAUgB,QAAU,EAC7Cf,EAAWgB,YAAcR,EAAAA,EAAAA,oBAAkC,CACzDI,kBACAE,oBACA,GAEJG,EAAAA,EAAAA,KAAUP,cAEV,MAAMQ,EAAeR,gBACbF,EAAAA,EAAAA,SAAuBR,EAAWgB,OACxCG,EAAAA,GAAAA,KAAa,UAAU,E,q3BCxEzB,MAAMC,EAAc,EAEpB,O,0JCOA,MAAMlB,EAAU,CACd,CAAEC,MAAO,KAAMC,UAAW,gBAAiBC,IAAK,iBAChD,CAAEF,MAAO,MAAOC,UAAW,UAAWC,IAAK,WAC3C,CAAEF,MAAO,KAAMC,UAAW,kBAAmBC,IAAK,mBAClD,CAAEF,MAAO,KAAMC,UAAW,mBAAoBC,IAAK,oBACnD,CAAEF,MAAO,OAAQC,UAAW,iBAAkBC,IAAK,kBACnD,CAAEF,MAAO,OAAQC,UAAW,YAAaC,IAAK,aAC9C,CACEF,MAAO,OACPC,UAAW,oBACXC,IAAK,qBAEP,CAAEF,MAAO,KAAMC,UAAW,iBAAkBC,IAAK,kBACjD,CAAEF,MAAO,MAAOC,UAAW,gBAAiBC,IAAK,iBACjD,CAAEF,MAAO,KAAMC,UAAW,gBAAiBC,IAAK,iBAChD,CAAEF,MAAO,OAAQC,UAAW,aAAcC,IAAK,eAG3CL,GAAaC,EAAAA,EAAAA,IAAI,IACjBoB,GAASC,EAAAA,EAAAA,MAETC,EAAWb,UACQ,eAAnBc,EAAMC,SACRzB,EAAWgB,YAAcR,EAAAA,EAAAA,cAA4B,CACnDkB,SAASC,EAAAA,EAAAA,MAAcD,UAGzB1B,EAAWgB,YAAcR,EAAAA,EAAAA,MAC3B,E,OAGFS,EAAAA,EAAAA,KAAUP,eAGVkB,EAAAA,EAAAA,KACE,IAAMP,EAAOQ,aAAab,QACzBc,IACCxB,QAAQC,IAAIuB,GACZP,EAASO,EAAU,GAErB,CAAEC,WAAW,I,gJCjDf,MAAMX,EAAc,EAEpB,O","sources":["webpack://hrms_frontend/./src/service/salaryService.js","webpack://hrms_frontend/./src/views/salary/SalaryAdd.vue","webpack://hrms_frontend/./src/views/salary/SalaryAdd.vue?47c0","webpack://hrms_frontend/./src/views/salary/SalaryList.vue","webpack://hrms_frontend/./src/views/salary/SalaryList.vue?3d57"],"sourcesContent":["import { request } from \"./request/request\";\n\nclass SalaryService {\n  generateSalarySheet(data) {\n    return request(\"/api/salarySheet/generateSalarySheet\", {\n      method: \"POST\",\n      data,\n    });\n  }\n\n  batchAdd(data) {\n    return request(\"/api/salarySheet/batchAdd\", {\n      method: \"POST\",\n      data,\n      dataType: \"json\",\n      contentType: \"application/json; charset=UTF-8\",\n    });\n  }\n  list() {\n    return request(\"/api/salarySheet/list\", {\n      method: \"POST\",\n    });\n  }\n  listByEmpCode(data) {\n    return request(\"/api/salarySheet/listByEmpCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n}\n\nexport default new SalaryService();\n","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      ref=\"formRef\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n    >\r\n      <a-form-item\r\n        label=\"选择月份\"\r\n        name=\"yearMonth\"\r\n        :rules=\"[{ required: true, message: '选择月份!' }]\"\r\n      >\r\n        <a-date-picker v-model:value=\"formState.yearMonth\" picker=\"month\" />\r\n      </a-form-item>\r\n      <a-form-item>\r\n        <div\r\n          style=\"display: flex; align-items: center; justify-content: center\"\r\n        >\r\n          <a-button type=\"primary\" html-type=\"submit\">生成工资单</a-button>\r\n        </div>\r\n      </a-form-item>\r\n    </a-form>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\"> </a-table>\r\n    <div style=\"display: flex; align-items: center; justify-content: center; margin-top: 20px;\">\r\n      <a-button type=\"primary\" @click=\"handleCommit\">提交结果</a-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport salaryService from \"@/service/salaryService\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { reactive, ref, onMounted } from \"vue\";\r\n// import { getUserInfo } from \"@/utils/authUtil\";\r\n// import { useRoute, useRouter } from \"vue-router\";\r\n\r\n// const route = useRoute();\r\nconst formState = reactive({\r\n  yearMonth: \"\",\r\n});\r\nconst dataSource = ref([]);\r\n\r\nconst columns = [\r\n  { title: \"员工号\", dataIndex: \"empCode\", key: \"empCode\" },\r\n  { title: \"年份\", dataIndex: \"salarySheetYear\", key: \"salarySheetYear\" },\r\n  { title: \"月份\", dataIndex: \"salarySheetMonth\", key: \"salarySheetMonth\" },\r\n  { title: \"合同工资\", dataIndex: \"contractSalary\", key: \"contractSalary\" },\r\n  { title: \"请假天数\", dataIndex: \"leaveDays\", key: \"leaveDays\" },\r\n  {\r\n    title: \"请假扣除\",\r\n    dataIndex: \"leaveDeductSalary\",\r\n    key: \"leaveDeductSalary\",\r\n  },\r\n  { title: \"社保\", dataIndex: \"socialSecurity\", key: \"socialSecurity\" },\r\n  { title: \"公积金\", dataIndex: \"providentFund\", key: \"providentFund\" },\r\n  { title: \"个税\", dataIndex: \"individualTax\", key: \"individualTax\" },\r\n  { title: \"实发工资\", dataIndex: \"realSalary\", key: \"realSalary\" },\r\n];\r\nconsole.log(salaryService);\r\n\r\nconst onFinish = async (values) => {\r\n  const { yearMonth } = values;\r\n  const salarySheetYear = yearMonth.year();\r\n  const salarySheetMonth = yearMonth.month() + 1;\r\n  dataSource.value = await salaryService.generateSalarySheet({\r\n    salarySheetYear,\r\n    salarySheetMonth,\r\n  });\r\n};\r\nonMounted(async () => {});\r\n\r\nconst handleCommit = async () => {\r\n  await salaryService.batchAdd(dataSource.value);\r\n  message.info(\"工资单保存成功\");\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./SalaryAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalaryAdd.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\"></a-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, watch } from \"vue\";\r\nimport salaryService from \"@/service/salaryService\"; //引入路由函数\r\nimport { getUserInfo } from \"@/utils/authUtil\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst columns = [\r\n  { title: \"ID\", dataIndex: \"salarySheetId\", key: \"salarySheetId\" },\r\n  { title: \"员工号\", dataIndex: \"empCode\", key: \"empCode\" },\r\n  { title: \"年份\", dataIndex: \"salarySheetYear\", key: \"salarySheetYear\" },\r\n  { title: \"月份\", dataIndex: \"salarySheetMonth\", key: \"salarySheetMonth\" },\r\n  { title: \"合同工资\", dataIndex: \"contractSalary\", key: \"contractSalary\" },\r\n  { title: \"请假天数\", dataIndex: \"leaveDays\", key: \"leaveDays\" },\r\n  {\r\n    title: \"请假扣除\",\r\n    dataIndex: \"leaveDeductSalary\",\r\n    key: \"leaveDeductSalary\",\r\n  },\r\n  { title: \"社保\", dataIndex: \"socialSecurity\", key: \"socialSecurity\" },\r\n  { title: \"公积金\", dataIndex: \"providentFund\", key: \"providentFund\" },\r\n  { title: \"个税\", dataIndex: \"individualTax\", key: \"individualTax\" },\r\n  { title: \"实发工资\", dataIndex: \"realSalary\", key: \"realSalary\" },\r\n];\r\n\r\nconst dataSource = ref([]);\r\nconst router = useRouter();\r\n\r\nconst queryAll = async (route) => {\r\n  if (route.fullPath === \"/salary/my\") {\r\n    dataSource.value = await salaryService.listByEmpCode({\r\n      empCode: getUserInfo().empCode,\r\n    });\r\n  } else {\r\n    dataSource.value = await salaryService.list();\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n});\r\n\r\nwatch(\r\n  () => router.currentRoute.value,\r\n  (thisRoute) => {\r\n    console.log(thisRoute);\r\n    queryAll(thisRoute);\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./SalaryList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SalaryList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["SalaryService","generateSalarySheet","data","request","method","batchAdd","dataType","contentType","list","listByEmpCode","formState","reactive","yearMonth","dataSource","ref","columns","title","dataIndex","key","console","log","salaryService","onFinish","async","values","salarySheetYear","year","salarySheetMonth","month","value","onMounted","handleCommit","message","__exports__","router","useRouter","queryAll","route","fullPath","empCode","getUserInfo","watch","currentRoute","thisRoute","immediate"],"sourceRoot":""}