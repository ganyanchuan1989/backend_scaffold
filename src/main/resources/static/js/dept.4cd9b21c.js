"use strict";(self["webpackChunkhrms_frontend"]=self["webpackChunkhrms_frontend"]||[]).push([[570],{5799:function(e,t,a){var d=a(9200);class l{add(e){return(0,d.W)("/api/dept/add",{method:"POST",data:e})}update(e){return(0,d.W)("/api/dept/update",{method:"POST",data:e})}delete(e){return(0,d.W)("/api/dept/delete",{method:"POST",data:e})}list(){return(0,d.W)("/api/dept/list",{method:"POST"})}listAll(){return(0,d.W)("/api/dept/listAll",{method:"POST"})}queryByCode(e){return(0,d.W)("/api/dept/queryByCode",{method:"POST",data:e})}likeByCode(e){return(0,d.W)("/api/dept/likeByCode",{method:"POST",data:e})}}t["Z"]=new l},9394:function(e,t,a){a.d(t,{u:function(){return d}});const d=(e,t)=>{for(let a in e)e[a]=t[a];return e}},4635:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var d=a(3396),l=a(4870),u=a(5799),n=a(2074),o=a(2483),p=a(8439),r=a(9394),i={__name:"DeptAdd",setup(e){const t=(0,o.yj)(),a=(0,o.tv)();let i=p.zw.ADD,s=null,m=(0,l.qj)({deptCode:"",deptName:"",deptDesc:""});const c=(0,l.iH)(),f=async e=>{if(i===p.zw.UPDATE){e={...s,...e};const t=await u.Z.update(e);n.ZP.info("修改成功："+t.deptCode),a.back()}else{const t=await u.Z.add(e);n.ZP.info("新增成功："+t.deptCode),c.value.resetFields()}};return(0,d.bv)((async()=>{t.params.code&&(i=p.zw.UPDATE,s=await u.Z.queryByCode({deptCode:t.params.code}),(0,r.u)(m,{...s}))})),(e,t)=>{const a=(0,d.up)("a-input"),u=(0,d.up)("a-form-item"),n=(0,d.up)("a-textarea"),o=(0,d.up)("a-button"),r=(0,d.up)("a-form");return(0,d.wg)(),(0,d.iD)("div",null,[(0,d.Wm)(r,(0,d.dG)({model:(0,l.SU)(m),ref_key:"formRef",ref:c,autocomplete:"off",onFinish:f},(0,l.SU)(p.Ju)),{default:(0,d.w5)((()=>[(0,d.Wm)(u,{label:"部门代码",name:"deptCode",rules:[{required:!0,message:"请输入部门代码!"}]},{default:(0,d.w5)((()=>[(0,d.Wm)(a,{value:(0,l.SU)(m).deptCode,"onUpdate:value":t[0]||(t[0]=e=>(0,l.SU)(m).deptCode=e)},null,8,["value"])])),_:1}),(0,d.Wm)(u,{label:"部门名称",name:"deptName",rules:[{required:!0,message:"请输入部门名称!"}]},{default:(0,d.w5)((()=>[(0,d.Wm)(a,{value:(0,l.SU)(m).deptName,"onUpdate:value":t[1]||(t[1]=e=>(0,l.SU)(m).deptName=e)},null,8,["value"])])),_:1}),(0,d.Wm)(u,{label:"部门简介",name:"deptDesc"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{value:(0,l.SU)(m).deptDesc,"onUpdate:value":t[2]||(t[2]=e=>(0,l.SU)(m).deptDesc=e)},null,8,["value"])])),_:1}),(0,d.Wm)(u,{"wrapper-col":{offset:8,span:16}},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"primary","html-type":"submit"},{default:(0,d.w5)((()=>[(0,d.Uk)("保存")])),_:1})])),_:1})])),_:1},16,["model"])])}}};const s=i;var m=s},3203:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});a(7658);var d=a(3396),l=a(4870),u=a(5799),n=a(2483),o=a(2074),p=a(8439);const r=["onClick"],i=(0,d._)("a",null,"删除",-1);var s={__name:"DeptList",setup(e){const t=(0,n.tv)(),a=[{title:"部门代码",dataIndex:"deptCode",key:"deptCode"},{title:"部门名称",dataIndex:"deptName",key:"deptName"},{title:"部门简称",dataIndex:"deptDesc",key:"deptDesc"},{title:"操作",dataIndex:"operation"}],s=(0,l.iH)([]),m=(0,l.iH)();let c=(0,l.qj)({deptCode:""});const f=async e=>{s.value=await u.Z.likeByCode(e)},y=async()=>{m.value.resetFields(),v()};(0,d.bv)((async()=>{v()}));const w=e=>{console.log(">>.dept",e.deptCode),t.push({path:`/dept/update/${e.deptCode}`})},v=async()=>{s.value=await u.Z.list()},C=async e=>{await u.Z["delete"]({...e,dataStatus:p.s_.DELETE}),o.ZP.info("删除成功："+e.deptCode),v()};return(e,t)=>{const u=(0,d.up)("a-input"),n=(0,d.up)("a-form-item"),o=(0,d.up)("a-button"),v=(0,d.up)("a-form"),k=(0,d.up)("a-popconfirm"),_=(0,d.up)("a-table");return(0,d.wg)(),(0,d.iD)("div",null,[(0,d.Wm)(v,(0,d.dG)({model:(0,l.SU)(c),name:"basic",autocomplete:"off",onFinish:f},(0,l.SU)(p.Ju),{ref_key:"formRef",ref:m}),{default:(0,d.w5)((()=>[(0,d.Wm)(n,{label:"部门代码",name:"deptCode",rules:[{required:!0,message:"请输入员工代码!"}]},{default:(0,d.w5)((()=>[(0,d.Wm)(u,{value:(0,l.SU)(c).deptCode,"onUpdate:value":t[0]||(t[0]=e=>(0,l.SU)(c).deptCode=e)},null,8,["value"])])),_:1}),(0,d.Wm)(n,{"wrapper-col":{offset:8,span:16}},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"primary","html-type":"submit"},{default:(0,d.w5)((()=>[(0,d.Uk)("查询")])),_:1}),(0,d.Wm)(o,{onClick:y,style:{"margin-left":"10px"}},{default:(0,d.w5)((()=>[(0,d.Uk)("重置")])),_:1})])),_:1})])),_:1},16,["model"]),(0,d.Wm)(_,{dataSource:s.value,columns:a},{bodyCell:(0,d.w5)((({column:e,record:t})=>["operation"===e.dataIndex?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[(0,d._)("a",{onClick:e=>w(t)},"修改",8,r),(0,d.Uk)(" | "),s.value.length?((0,d.wg)(),(0,d.j4)(k,{key:0,title:"确定要删除吗?",onConfirm:e=>C(t)},{default:(0,d.w5)((()=>[i])),_:2},1032,["onConfirm"])):(0,d.kq)("",!0)],64)):(0,d.kq)("",!0)])),_:1},8,["dataSource"])])}}};const m=s;var c=m}}]);
//# sourceMappingURL=dept.4cd9b21c.js.map