{"version":3,"file":"js/dept.4cd9b21c.js","mappings":"uIAEA,MAAMA,EACJC,IAAIC,GACF,OAAOC,EAAAA,EAAAA,GAAQ,gBAAiB,CAC9BC,OAAQ,OACRF,QAEJ,CACAG,OAAOH,GACL,OAAOC,EAAAA,EAAAA,GAAQ,mBAAoB,CACjCC,OAAQ,OACRF,QAEJ,CACAI,OAAOJ,GACL,OAAOC,EAAAA,EAAAA,GAAQ,mBAAoB,CACjCC,OAAQ,OACRF,QAEJ,CACAK,OACE,OAAOJ,EAAAA,EAAAA,GAAQ,iBAAkB,CAC/BC,OAAQ,QAEZ,CACAI,UACE,OAAOL,EAAAA,EAAAA,GAAQ,oBAAqB,CAClCC,OAAQ,QAEZ,CACAK,YAAYP,GACV,OAAOC,EAAAA,EAAAA,GAAQ,wBAAyB,CACtCC,OAAQ,OACRF,QAEJ,CACAQ,WAAWR,GACT,OAAOC,EAAAA,EAAAA,GAAQ,uBAAwB,CACrCC,OAAQ,OACRF,QAEJ,EAGF,WAAmBF,C,uDC7CZ,MAAMW,EAAiBA,CAACC,EAAWV,KACxC,IAAK,IAAIW,KAAOD,EACdA,EAAUC,GAAOX,EAAKW,GAExB,OAAOD,CAAS,C,2KC0ClB,MAAME,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAEf,IAAIC,EAAUC,EAAAA,GAAAA,IACVC,EAAQ,KAGRR,GAAYS,EAAAA,EAAAA,IAAS,CACvBC,SAAU,GACVC,SAAU,GACVC,SAAU,KAGZ,MAAMC,GAAUC,EAAAA,EAAAA,MAEVC,EAAWC,UACf,GAAIV,IAAYC,EAAAA,GAAAA,OAAgB,CAC9BU,EAAS,IAAKT,KAAUS,GACxB,MAAMC,QAAYC,EAAAA,EAAAA,OAAmBF,GACrCG,EAAAA,GAAAA,KAAa,QAAUF,EAAIR,UAC3BN,EAAOiB,MACT,KAAO,CACL,MAAMH,QAAYC,EAAAA,EAAAA,IAAgBF,GAClCG,EAAAA,GAAAA,KAAa,QAAUF,EAAIR,UAC3BG,EAAQS,MAAMC,aAChB,G,OAGFC,EAAAA,EAAAA,KAAUR,UACJd,EAAMuB,OAAOC,OACfpB,EAAUC,EAAAA,GAAAA,OACVC,QAAcW,EAAAA,EAAAA,YAAwB,CAAET,SAAUR,EAAMuB,OAAOC,QAC/D3B,EAAAA,EAAAA,GAAeC,EAAW,IAAKQ,IACjC,I,moCC5EF,MAAMmB,EAAc,EAEpB,O,8NCyCA,MAAMvB,GAASC,EAAAA,EAAAA,MAETuB,EAAU,CACd,CAAEC,MAAO,OAAQC,UAAW,WAAY7B,IAAK,YAC7C,CAAE4B,MAAO,OAAQC,UAAW,WAAY7B,IAAK,YAC7C,CAAE4B,MAAO,OAAQC,UAAW,WAAY7B,IAAK,YAC7C,CAAE4B,MAAO,KAAMC,UAAW,cAGtBC,GAAajB,EAAAA,EAAAA,IAAI,IACjBD,GAAUC,EAAAA,EAAAA,MAEhB,IAAId,GAAYS,EAAAA,EAAAA,IAAS,CACvBC,SAAU,KAGZ,MAAMK,EAAWC,UACfe,EAAWT,YAAcH,EAAAA,EAAAA,WAAuBF,EAAO,EAGnDe,EAAYhB,UAChBH,EAAQS,MAAMC,cACdU,GAAU,GAGZT,EAAAA,EAAAA,KAAUR,UACRiB,GAAU,IAGZ,MAAMC,EAAaC,IACjBC,QAAQC,IAAI,UAAWF,EAAOzB,UAC9BN,EAAOkC,KAAK,CACVC,KAAO,gBAAeJ,EAAOzB,YAC7B,EAEEuB,EAAWjB,UACfe,EAAWT,YAAcH,EAAAA,EAAAA,MAAkB,EAIvCqB,EAAiBxB,gBACfG,EAAAA,EAAAA,UAAmB,IAAKgB,EAAQM,WAAYC,EAAAA,GAAAA,SAClDtB,EAAAA,GAAAA,KAAa,QAAUe,EAAOzB,UAC9BuB,GAAU,E,mwCCtFZ,MAAMN,EAAc,EAEpB,O","sources":["webpack://hrms_frontend/./src/service/deptService.js","webpack://hrms_frontend/./src/utils/myUtils.js","webpack://hrms_frontend/./src/views/dept/DeptAdd.vue","webpack://hrms_frontend/./src/views/dept/DeptAdd.vue?1230","webpack://hrms_frontend/./src/views/dept/DeptList.vue","webpack://hrms_frontend/./src/views/dept/DeptList.vue?7abc"],"sourcesContent":["import { request } from \"./request/request\";\n\nclass DeptService {\n  add(data) {\n    return request(\"/api/dept/add\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  update(data) {\n    return request(\"/api/dept/update\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  delete(data) {\n    return request(\"/api/dept/delete\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  list() {\n    return request(\"/api/dept/list\", {\n      method: \"POST\",\n    });\n  }\n  listAll() {\n    return request(\"/api/dept/listAll\", {\n      method: \"POST\",\n    });\n  }\n  queryByCode(data) {\n    return request(\"/api/dept/queryByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n  likeByCode(data) {\n    return request(\"/api/dept/likeByCode\", {\n      method: \"POST\",\n      data,\n    });\n  }\n}\n\nexport default new DeptService();\n","export const setFieldsValue = (formState, data) => {\r\n  for (let key in formState) {\r\n    formState[key] = data[key];\r\n  }\r\n  return formState;\r\n};\r\n\r\n","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      ref=\"formRef\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n    >\r\n      <a-form-item\r\n        label=\"部门代码\"\r\n        name=\"deptCode\"\r\n        :rules=\"[{ required: true, message: '请输入部门代码!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.deptCode\" />\r\n      </a-form-item>\r\n      <a-form-item\r\n        label=\"部门名称\"\r\n        name=\"deptName\"\r\n        :rules=\"[{ required: true, message: '请输入部门名称!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.deptName\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item\r\n        label=\"部门简介\"\r\n        name=\"deptDesc\"\r\n      >\r\n        <a-textarea v-model:value=\"formState.deptDesc\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">保存</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted } from \"vue\";\r\nimport deptService from \"@/service/deptService\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { OPERATE, formOneLayout } from \"@/utils/constant\";\r\nimport { setFieldsValue } from \"@/utils/myUtils\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nlet operate = OPERATE.ADD;\r\nlet cache = null;\r\n\r\n\r\nlet formState = reactive({\r\n  deptCode: \"\",\r\n  deptName: \"\",\r\n  deptDesc: \"\",\r\n});\r\n\r\nconst formRef = ref();\r\n\r\nconst onFinish = async (values) => {\r\n  if (operate === OPERATE.UPDATE) {\r\n    values = { ...cache, ...values };\r\n    const ret = await deptService.update(values);\r\n    message.info(\"修改成功：\" + ret.deptCode);\r\n    router.back();\r\n  } else {\r\n    const ret = await deptService.add(values);\r\n    message.info(\"新增成功：\" + ret.deptCode);\r\n    formRef.value.resetFields();\r\n  }\r\n};\r\n\r\nonMounted(async () => {\r\n  if (route.params.code) {\r\n    operate = OPERATE.UPDATE; // 修改\r\n    cache = await deptService.queryByCode({ deptCode: route.params.code });\r\n    setFieldsValue(formState, { ...cache });\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./DeptAdd.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeptAdd.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <a-form\r\n      :model=\"formState\"\r\n      name=\"basic\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      v-bind=\"formOneLayout\"\r\n      ref=\"formRef\"\r\n    >\r\n      <a-form-item\r\n        label=\"部门代码\"\r\n        name=\"deptCode\"\r\n        :rules=\"[{ required: true, message: '请输入员工代码!' }]\"\r\n      >\r\n        <a-input v-model:value=\"formState.deptCode\" />\r\n      </a-form-item>\r\n      <a-form-item :wrapper-col=\"{ offset: 8, span: 16 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">查询</a-button>\r\n        <a-button @click=\"resetForm\" style=\"margin-left: 10px\">重置</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\">\r\n      <template #bodyCell=\"{ column, record }\">\r\n        <template v-if=\"column.dataIndex === 'operation'\">\r\n          <a @click=\"updateJob(record)\">修改</a> |\r\n          <a-popconfirm\r\n            v-if=\"dataSource.length\"\r\n            title=\"确定要删除吗?\"\r\n            @confirm=\"deleteDataDict(record)\"\r\n          >\r\n            <a>删除</a>\r\n          </a-popconfirm>\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive, ref } from \"vue\";\r\nimport deptService from \"@/service/deptService\"; //引入路由函数\r\nimport { useRouter } from \"vue-router\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { DATA_STATUS, formOneLayout } from \"@/utils/constant\";\r\n\r\nconst router = useRouter();\r\n\r\nconst columns = [\r\n  { title: \"部门代码\", dataIndex: \"deptCode\", key: \"deptCode\" },\r\n  { title: \"部门名称\", dataIndex: \"deptName\", key: \"deptName\" },\r\n  { title: \"部门简称\", dataIndex: \"deptDesc\", key: \"deptDesc\" },\r\n  { title: \"操作\", dataIndex: \"operation\" },\r\n];\r\n\r\nconst dataSource = ref([]);\r\nconst formRef = ref();\r\n\r\nlet formState = reactive({\r\n  deptCode: \"\",\r\n});\r\n\r\nconst onFinish = async (values) => {\r\n  dataSource.value = await deptService.likeByCode(values);\r\n};\r\n\r\nconst resetForm = async () => {\r\n  formRef.value.resetFields();\r\n  queryAll();\r\n};\r\n\r\nonMounted(async () => {\r\n  queryAll();\r\n});\r\n\r\nconst updateJob = (record) => {\r\n  console.log('>>.dept', record.deptCode)\r\n  router.push({\r\n    path: `/dept/update/${record.deptCode}`,\r\n  });\r\n};\r\nconst queryAll = async () => {\r\n  dataSource.value = await deptService.list();\r\n};\r\n\r\n\r\nconst deleteDataDict = async (record) => {\r\n  await deptService.delete({ ...record, dataStatus: DATA_STATUS.DELETE });\r\n  message.info(\"删除成功：\" + record.deptCode);\r\n  queryAll();\r\n};\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./DeptList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DeptList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["DeptService","add","data","request","method","update","delete","list","listAll","queryByCode","likeByCode","setFieldsValue","formState","key","route","useRoute","router","useRouter","operate","OPERATE","cache","reactive","deptCode","deptName","deptDesc","formRef","ref","onFinish","async","values","ret","deptService","message","back","value","resetFields","onMounted","params","code","__exports__","columns","title","dataIndex","dataSource","resetForm","queryAll","updateJob","record","console","log","push","path","deleteDataDict","dataStatus","DATA_STATUS"],"sourceRoot":""}